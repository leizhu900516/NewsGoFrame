
{{template "base.html" .}}
<br>
<div class="content" style="margin-top: 60px">
    <div class="layui-container">
        <div class="layui-row layui-col-space10" >
            <div class="layui-col-md9 ">
                <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
                    <ul class="layui-tab-title">
                        <li class="layui-this">最新文章</li>
                        <li>最热文章</li>
                    </ul>
                    <div class="layui-tab-content" >
                        <!--新闻列表-->
                        <div class="layui-tab-item layui-show" id="newslist_left">
                            <div class="layui-row grid-demo layui-col-space10 site-demo-flow">
                                <div class="layui-col-md3">
                                    <img src="https://gw.alicdn.com/bao/uploaded/i2/162734861/TB2V5rsX_gc61BjSZFkXXcTkFXa_!!162734861.jpg_400x400q90.jpg?t=1518395023940">
                                </div>
                                <div class="layui-col-md9" id="news_item_all_style">
                                    <div class="new_home_list">
                                        <a class="news_title">中国证监会：3月26日启动原油期货挂牌交易</a>
                                        <br>
                                        <a class="news_abstract">1992年，我国就推出原油、成品油的期货交易，但上市不久就关闭了交易。未来“上海油”，有望与现有的纽约、伦敦两地基准油价，共同组成全球24小时的连续交易机制.</a>
                                        <div class="bottom_refer_and_icon">
                                            <div class="left">
                                                <i class="layui-icon">&#xe6c6;</i> <span>赞</span>
                                            </div>
                                            <div class="right">
                                                <i class="layui-icon"> &#xe60e;</i><span>30分钟前</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--新闻列表-->
                        </div>

                        <div class="layui-tab-item">
                            <div class="fly-panel">
                                <ul class="hot-list" data-v-5ee82df8="">
                                    <li class="hot-article" data-v-5ee82df8="">
                                        <div class="hot-article__title" data-v-5ee82df8="">
                                            <div class="hot-article__title__idx first" data-v-5ee82df8="">1</div>
                                            <a target="_blank" href="/articles/3232975" class="hot-article__title__text" data-v-5ee82df8="">中国证监会：3月26日启动原油期货挂牌交易</a>
                                        </div> <!---->
                                    </li>
                                    <li class="hot-article" data-v-5ee82df8="">
                                        <div class="hot-article__title" data-v-5ee82df8="">
                                            <div class="hot-article__title__idx second" data-v-5ee82df8="">2</div>
                                            <a target="_blank" href="/articles/3232923" class="hot-article__title__text" data-v-5ee82df8="">暴跌的基因：从股灾到股殇</a>
                                        </div> <!---->
                                    </li>
                                    <li class="hot-article" data-v-5ee82df8="">
                                        <div class="hot-article__title" data-v-5ee82df8="">
                                            <div class="hot-article__title__idx third" data-v-5ee82df8="">3</div>
                                            <a target="_blank" href="/articles/3232923" class="hot-article__title__text" data-v-5ee82df8="">美股再度震荡 道指盘中跌超300点 盘初曾涨近350点</a>
                                        </div> <!---->
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <ul class="flow-default" id="LAY_demo1"></ul>

            </div>
            <div class="layui-col-md3 ">
                <div class="fly-panel">
                    <h3 class="fly-panel-title">温馨通道</h3>
                    <ul class="fly-panel-main fly-list-static">
                        <li>
                            <a href="http://fly.layui.com/jie/4281/" target="_blank">layui 的 GitHub 及 Gitee (码云) 仓库，欢迎Star</a>
                        </li>
                        <li>
                            <a href="http://fly.layui.com/jie/5366/" target="_blank"> layui 常见问题的处理和实用干货集锦 </a>
                        </li>
                        <li>
                            <a href="http://fly.layui.com/jie/13435/" target="_blank"> 关于Fly社区飞吻的消耗与增加 </a>
                        </li>
                        <li>
                            <a name="signin"></a> <a href="http://fly.layui.com/jie/19804/" target="_blank"> 《layui从鱼到渔》系列教程 </a>
                        </li>
                        <li>
                            <a href="http://www.layui.com/template/fly/" target="_blank">下载“Fly社区”页面模板：Fly Template</a>
                        </li>
                    </ul>
                </div>
                <div class="fly-panel">
                    <div class="fly-panel-title"> 钻级赞助商 <span class="fly-mid"></span>
                        <a href="/jie/15697/" class="fly-link fly-joinad    ">我要加入</a>
                    </div>
                    <div class="fly-panel-main" style="padding: 13px 15px;">
                        <a href="/jie/15697/" target="_blank" rel="nofollow" class="fly-zanzhu" style="background-color: #393D49;">虚席以待</a>
                    </div>
                </div>
                <div class="fly-panel" style="padding: 20px 0; text-align: center;">
                    <div class="fly-panel-main">
                        <img src="/static/images/gongzhonghao.jpg" style="max-width: 100%;" alt="layui">
                        <p style="position: relative; color: #666;">微信扫码关注 layui 公众号</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="left_fixed">
        <ul>
            <li><i class="layui-icon" style="font-size: 24px;">&#xe68e;</i> </li>
            <li><i class="layui-icon" style="font-size: 24px;">&#xe6c6;</i> </li>
            <li><i class="layui-icon" style="font-size: 24px;">&#xe619;</i> </li>
        </ul>
    </div>
</div>


{{template "foot.html"}}
<script src="/static/js/jquery.js"></script>
{{/*<script src="/static/js/getnewslist.js"></script>*/}}
<script>
    layui.use('element', function(){
        var $ = layui.jquery
                ,element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块

        //监听导航点击
        element.on('nav(demo)', function(elem){
            //console.log(elem)
            layer.msg(elem.text());
        });
        //触发事件
        var active = {
            tabAdd: function(){
                //新增一个Tab项
                element.tabAdd('demo', {
                    title: '新选项'+ (Math.random()*1000|0) //用于演示
                    ,content: '内容'+ (Math.random()*1000|0)
                    ,id: new Date().getTime() //实际使用一般是规定好的id，这里以时间戳模拟下
                })
            }
            ,tabChange: function(){
                //切换到指定Tab项
                element.tabChange('demo', '22'); //切换到：用户管理
            }
        };

        $('.site-demo-active').on('click', function(){
            var othis = $(this), type = othis.data('type');
            active[type] ? active[type].call(this, othis) : '';
        });

        //Hash地址的定位
        var layid = location.hash.replace(/^#test=/, '');
        element.tabChange('test', layid);

        element.on('tab(test)', function(elem){
            location.hash = 'test='+ $(this).attr('lay-id');
        });

    });

</script>
<script>
    layui.use('flow', function(){
        var flow = layui.flow;

        flow.load({
            elem: '#LAY_demo1' //流加载容器
            ,scrollElem: '#LAY_demo1' //滚动条所在元素，一般不用填，此处只是演示需要。
            ,done: function(page, next){ //执行下一页的回调
                //模拟数据插入
                console.log(page,next)
                setTimeout(function(){
                    var lis = [];
                    // for(var i = 0; i < 8; i++){
                    //     lis.push('<li>'+ ( (page-1)*8 + i + 1 ) +'</li>')
                    // }
                    $.ajax({
                        url:"/api/news",
                        data:JSON.stringify({"page":page,"limit":6}),
                        contentType: "application/json;charset=utf-8",
                        type:"post",
                        success:function (result) {
                            $.each(result.data,function (i, j) {
                                console.log(j)
                                $("#newslist_left").append('<div class="layui-row grid-demo layui-col-space10 site-demo-flow">\n' +
                                        '                            <div class="layui-col-md3">\n' +
                                        '                                <img src="https://gw.alicdn.com/bao/uploaded/i2/162734861/TB2V5rsX_gc61BjSZFkXXcTkFXa_!!162734861.jpg_400x400q90.jpg?t=1518395023940">\n' +
                                        '                            </div>\n' +
                                        '                            <div class="layui-col-md9"  id="news_item_all_style">\n' +
                                        '                                <div class="new_home_list">\n' +
                                        '                                    <a href="/news/'+j.newid+'" class="news_title">'+j.title+'</a>\n' +
                                        '                                    <br>\n' +
                                        '                                    <a href="/news/'+j.newid+'" class="news_abstract">'+j.abstract+'</a>\n' +
                                        '                                    <div class="bottom_refer_and_icon">\n' +
                                        '                                        <div class="left">\n' +
                                        '                                            <i class="layui-icon">&#xe6c6;</i><span>赞</span>\n' +
                                        '                                        </div>\n' +
                                        '                                        <div class="right">\n' +
                                        '                                            <i class="layui-icon"> &#xe60e;</i><span>30分钟前</span>\n' +
                                        '                                        </div>\n' +
                                        '                                    </div>\n' +
                                        '                                </div>\n' +
                                        '                            </div>\n' +
                                        '                        </div>')
                            })
                        }

                    })
                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < 10); //假设总页数为 10
                }, 500);
            }
        });
    });
</script>
<script>
    //搜索
    $(document).ready(function () {
        $("#searchicon").on('click',function () {
            var keyword=$("#key").val();
            window.location.href="/search?q="+keyword;
        })
    });
    $(document).keypress(function(e) {
        // 回车键事件
        if(e.which == 13) {
            var keyword=$("#key").val();
            window.location.href="/search?q="+keyword;
        }
    });
</script>
        <script>
            layui.use('layer', function(){
                var layer = layui.layer;
                $("#login").on('click',function () {
                    layer.open({
                        title:"登录",
                        type: 1,
                        offset: 'auto',
                        skin: 'layui-layer-rim', //加上边框
                        area: ['420px', '240px'], //宽高
                        content: '<div><input type="text" name="title" required  lay-verify="required" placeholder="手机号/用户名/邮箱"  class="layui-input"></div>' +
                        '<div><input type="text" name="title" required  lay-verify="required" placeholder="密码（不少于6位）"  class="layui-input"></div>' +
                        '<br><div style="text-align: center"><button class="layui-btn layui-btn-normal" style="width: 200px;">登录</button></div>'
                    });
                })
            });
        </script>
</body>
</html>
